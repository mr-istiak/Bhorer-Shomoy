const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PositionSelector-BoAG3vWa.js","assets/index-N1-JztXm.js","assets/app-BLrU0oeZ.js","assets/app-Cil8wQqm.css","assets/DialogTrigger.vue_vue_type_script_setup_true_lang-Cd4yFBpp.js","assets/useForwardPropsEmits-DMzaJHsr.js","assets/DialogTitle-BLb-kCLe.js","assets/createLucideIcon-Z75VbzRp.js","assets/useForwardExpose-BYFvSCAe.js","assets/index-CTBYmGwP.js","assets/Presence-BzO0lgon.js"])))=>i.map(i=>d[i]);
import{r as _,M as A,X as B,f as j,j as C,e as b,o as m,g as o,E as i,u as e,N as I,a as r,z as d,s as L,c as w,L as D,A as x,V as N,Y as O,F as R,Q as F,G as H,_ as Q}from"./app-BLrU0oeZ.js";import{_ as u,a as h}from"./Label.vue_vue_type_script_setup_true_lang-hXX9gIjL.js";import{Q as Z}from"./vue-quill.esm-bundler-BKtAppDw.js";import{m as z}from"./useUrl-CBgCp5WS.js";import{_ as G}from"./index-N1-JztXm.js";import{m as X,s as $}from"./useSlug-tpINBdFG.js";import{_ as p}from"./InputError.vue_vue_type_script_setup_true_lang-Dxkch3se.js";import{_ as Y,a as k,b as J,c as K,d as W,e as U,f as ee,t as te}from"./useTranslation-NI5riSGY.js";import{a as se}from"./Index.vue_vue_type_script_setup_true_lang-CyTtRMfB.js";import{_ as oe}from"./UserInfo.vue_vue_type_script_setup_true_lang-BQl9F7L7.js";import{_ as le}from"./InlineHeader.vue_vue_type_script_setup_true_lang-DcWcj84i.js";import{w as ae}from"./index-CTBYmGwP.js";import"./useForwardExpose-BYFvSCAe.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-Cd4yFBpp.js";import"./useForwardPropsEmits-DMzaJHsr.js";import"./DialogTitle-BLb-kCLe.js";import"./createLucideIcon-Z75VbzRp.js";import"./Presence-BzO0lgon.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-qjezJ_Fe.js";import"./useFormControl-Dtmgg0Ff.js";import"./PopperContent-BN2wiAUF.js";import"./TextLink.vue_vue_type_script_setup_true_lang-q34rlnBw.js";import"./Heading.vue_vue_type_script_setup_true_lang-OlAXPcJL.js";const ie={class:"w-full mx-auto p-6 rounded-md shadow-sm"},re={class:"flex space-x-4"},ne={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},de={class:"md:col-span-2 space-y-4"},ue={class:"space-y-2"},me={class:"text-sm text-muted-foreground mt-1"},pe={class:"font-mono"},fe={class:"text-xs text-muted-foreground mt-1"},_e={class:"w-full"},ge={class:"mt-1 w-full min-h-64 border border-dashed rounded flex items-center justify-center"},ce={class:"flex items-center justify-between"},ve={key:0},be={key:1},we={breadcrumbs:[{title:"Posts",href:route("posts.index")},{title:"Edit Post",href:document.location.href}]},He=Object.assign(we,{__name:"Edit",props:{post:Object,canViewAnyPosition:Boolean},setup(f){const P=F(()=>Q(()=>import("./PositionSelector-BoAG3vWa.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),n=f,g=_(!1),c=_(!1),v=_(null),E=A({container:[["bold","italic","underline","strike"],["blockquote","code-block"],["link","video"],["imageUploader"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}]],handlers:{imageUploader:()=>g.value=!0}}),V=_(null),s=B({title:n.post.title||"",slug:n.post.slug||"",meta_description:n.post.meta_description||"",content:n.post.content||"",status:n.post.status!=="draft"?"published":"draft",featured_image:n.post.featured_image||null,categories:Array.isArray(n.post.categories)?n.post.categories.map(a=>a.id):n.post.categories||[]});function T(){c.value=!0,s.slug=$(s.slug)}const M=j(()=>X(s.slug));function q(){s.put(route("posts.update",{post:n.post.id}),{onBefore:a=>{a.data.featured_image&&(a.data.featured_image=a.data.featured_image.id)},onSuccess:()=>{c.value=!1}})}function S(a){if(!a?.path)return;v.value=a;const l=`<img src="${z(a.path)}" alt="${a.alt}" title="${a.title}">`,y=V.value.getQuill();y.pasteHTML(y.getSelection().index,l),v.value=null}return ae(()=>s.title,async a=>{let t=await te(a);t=t?.translated;const l=$(t||a);c.value||(s.slug=l)},{debounce:100}),C(()=>{let a=document.querySelector(".ql-imageUploader");a&&(a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#646c72"><path d="M480-480ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h320v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm40-160h480L570-480 450-320l-90-120-120 160Zm480-280v-167l-64 63-56-56 160-160 160 160-56 56-64-63v167h-80Z"/></svg>')}),(a,t)=>(m(),b(H,null,[o(e(I),{title:"Edit Post"}),i("div",ie,[o(le,{title:"Edit Post",link:{href:a.route("posts.index"),text:"Back to posts"}},null,8,["link"]),o(e(u),{class:"mb-2"},{default:r(()=>t[9]||(t[9]=[d("Author",-1)])),_:1,__:[9]}),i("div",re,[o(oe,{user:f.post.author,"show-email":!0},null,8,["user"])]),i("form",{onSubmit:L(q,["prevent"]),class:"space-y-4 mt-4"},[i("div",ne,[i("div",de,[i("div",ue,[o(e(u),{for:"title"},{default:r(()=>t[10]||(t[10]=[d("Title",-1)])),_:1,__:[10]}),o(e(h),{id:"title",modelValue:e(s).title,"onUpdate:modelValue":t[0]||(t[0]=l=>e(s).title=l),placeholder:"Post title",required:""},null,8,["modelValue"]),o(p,{message:e(s).errors.title},null,8,["message"])]),i("div",null,[o(e(u),{for:"slug"},{default:r(()=>t[11]||(t[11]=[d("Slug",-1)])),_:1,__:[11]}),o(e(h),{id:"slug",modelValue:e(s).slug,"onUpdate:modelValue":t[1]||(t[1]=l=>e(s).slug=l),onInput:T,placeholder:"post-slug",required:""},null,8,["modelValue"]),i("p",me,[t[12]||(t[12]=d("URL preview: ",-1)),i("span",pe,x(M.value),1)]),o(p,{message:e(s).errors.slug},null,8,["message"])]),i("div",null,[o(e(u),{for:"meta_description"},{default:r(()=>t[13]||(t[13]=[d("Meta description",-1)])),_:1,__:[13]}),N(i("textarea",{id:"meta_description","onUpdate:modelValue":t[2]||(t[2]=l=>e(s).meta_description=l),class:R(["w-full rounded outline-0 p-2 mt-1 bg-transparent border",{"border-destructive":(e(s).meta_description||"").length>160}]),rows:"3",placeholder:"Meta description for SEO (max ~160 chars)"},null,2),[[O,e(s).meta_description]]),i("p",fe,x((e(s).meta_description||"").length)+" / 160",1),o(p,{message:e(s).errors.meta_description},null,8,["message"])]),i("div",_e,[o(e(u),{for:"categories"},{default:r(()=>t[14]||(t[14]=[d("Categories",-1)])),_:1,__:[14]}),o(Y,{modelValue:e(s).categories,"onUpdate:modelValue":t[3]||(t[3]=l=>e(s).categories=l)},null,8,["modelValue"])]),f.canViewAnyPosition?(m(),w(e(P),{key:0,post:f.post},null,8,["post"])):D("",!0)]),i("div",null,[o(e(u),{for:"featured_image"},{default:r(()=>t[15]||(t[15]=[d("Featured Image",-1)])),_:1,__:[15]}),i("div",ge,[e(s).featured_image?(m(),w(se,{key:0,item:e(s).featured_image,select:!1,class:"w-full [&>img]:h-auto",onRemoved:t[4]||(t[4]=l=>e(s).featured_image=null)},null,8,["item"])):(m(),w(k,{key:1,modelValue:e(s).featured_image,"onUpdate:modelValue":t[5]||(t[5]=l=>e(s).featured_image=l)},null,8,["modelValue"]))]),o(p,{message:e(s).errors.featured_image},null,8,["message"])])]),i("div",null,[o(e(u),{for:"content",class:"mb-2"},{default:r(()=>t[16]||(t[16]=[d("Content",-1)])),_:1,__:[16]}),o(k,{"model-value":v.value,"onUpdate:modelValue":S,open:g.value,"onUpdate:open":t[6]||(t[6]=l=>g.value=l)},{trigger:r(()=>t[17]||(t[17]=[i("span",null,null,-1)])),_:1},8,["model-value","open"]),o(e(Z),{content:e(s).content,"onUpdate:content":t[7]||(t[7]=l=>e(s).content=l),ref_key:"editor",ref:V,"content-type":"html",placeholder:"Post content",toolbar:E,theme:"snow"},null,8,["content","toolbar"]),o(p,{message:e(s).errors.content},null,8,["message"])]),i("div",ce,[o(e(ee),{modelValue:e(s).status,"onUpdate:modelValue":t[8]||(t[8]=l=>e(s).status=l),id:"status",name:"status",required:""},{default:r(()=>[o(e(J),{class:"w-[180px]"},{default:r(()=>[o(e(K),{placeholder:"Status"})]),_:1}),o(e(W),null,{default:r(()=>[o(e(U),{value:"draft"},{default:r(()=>t[18]||(t[18]=[d("Draft",-1)])),_:1,__:[18]}),o(e(U),{value:"published"},{default:r(()=>[d(x(`${n.post.status==="pending"?"Requested To ":n.post.status==="rejected"?"Again Request to ":""}Publish${n.post.status==="published"?"ed":""}`),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(e(G),{type:"submit",disabled:e(s).processing},{default:r(()=>[e(s).processing?(m(),b("span",ve,"Updating...")):(m(),b("span",be,"Update Post"))]),_:1},8,["disabled"])])],32)])],64))}});export{He as default};
