import{c as w}from"./useForwardPropsEmits-DMzaJHsr.js";import{af as I,r as f,l as E,q as T,p as C,f as O,d as P,t as S,ag as U,a8 as x}from"./app-BLrU0oeZ.js";import{r as b}from"./index-N1-JztXm.js";import{g as R,d as _}from"./useForwardExpose-BYFvSCAe.js";import{i as $}from"./index-CTBYmGwP.js";function Y(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}const[z,G]=w("ConfigProvider");function H(t,e="reka"){return`${e}-${I?.()}`}function D(t,e){const r=f(t);function l(s){return e[r.value][s]??r.value}return{state:r,dispatch:s=>{r.value=l(s)}}}function F(t,e){const r=f({}),l=f("none"),v=f(t),s=t.value?"mounted":"unmounted";let u;const c=e.value?.ownerDocument.defaultView??R,{state:m,dispatch:i}=D(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),a=n=>{if($){const o=new CustomEvent(n,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(o)}};E(t,async(n,o)=>{const N=o!==n;if(await T(),N){const A=l.value,d=h(e.value);n?(i("MOUNT"),a("enter"),d==="none"&&a("after-enter")):d==="none"||d==="undefined"||r.value?.display==="none"?(i("UNMOUNT"),a("leave"),a("after-leave")):o&&A!==d?(i("ANIMATION_OUT"),a("leave")):(i("UNMOUNT"),a("after-leave"))}},{immediate:!0});const p=n=>{const o=h(e.value),N=o.includes(n.animationName),A=m.value==="mounted"?"enter":"leave";if(n.target===e.value&&N&&(a(`after-${A}`),i("ANIMATION_END"),!v.value)){const d=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",u=c?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=d)})}n.target===e.value&&o==="none"&&i("ANIMATION_END")},g=n=>{n.target===e.value&&(l.value=h(e.value))},y=E(e,(n,o)=>{n?(r.value=getComputedStyle(n),n.addEventListener("animationstart",g),n.addEventListener("animationcancel",p),n.addEventListener("animationend",p)):(i("ANIMATION_END"),u!==void 0&&c?.clearTimeout(u),o?.removeEventListener("animationstart",g),o?.removeEventListener("animationcancel",p),o?.removeEventListener("animationend",p))},{immediate:!0}),M=E(m,()=>{const n=h(e.value);l.value=m.value==="mounted"?n:"none"});return C(()=>{y(),M()}),{isPresent:O(()=>["mounted","unmountSuspended"].includes(m.value))}}function h(t){return t&&getComputedStyle(t).animationName||"none"}var J=P({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:r}){const{present:l,forceMount:v}=S(t),s=f(),{isPresent:u}=F(l,s);r({present:u});let c=e.default({present:u.value});c=b(c||[]);const m=U();if(c&&c?.length>1){const i=m?.parent?.type.name?`<${m.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${i}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(a=>`  - ${a}`).join(`
`)].join(`
`))}return()=>v.value||l.value||u.value?x(e.default({present:u.value})[0],{ref:i=>{const a=_(i);return typeof a?.hasAttribute>"u"||(a?.hasAttribute("data-reka-popper-content-wrapper")?s.value=a.firstElementChild:s.value=a),a}}):null}});export{J as P,Y as g,z as i,H as u};
