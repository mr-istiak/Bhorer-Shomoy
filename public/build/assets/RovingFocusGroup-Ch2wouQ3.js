import{c as h}from"./useForwardPropsEmits-CwhGNt__.js";import{u as O,a as P}from"./VisuallyHidden-BvK7UPRa.js";import{P as q}from"./index-BZs4ypES.js";import{g as w}from"./Presence-BrU0gijE.js";import{b as x}from"./useForwardExpose-Czjpx7C4.js";import{d as B,t as U,r as v,c as D,o as G,a as S,g as N,u as c,b as L}from"./app-GeWjX9nR.js";const M="rovingFocusGroup.onEntryFocus",V={bubbles:!1,cancelable:!0},k={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function K(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Z(e,o,n){const t=K(e.key,n);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(t))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(t)))return k[t]}function Y(e,o=!1){const n=w();for(const t of e)if(t===n||(t.focus({preventScroll:o}),w()!==n))return}function ee(e,o){return e.map((n,t)=>e[(o+t)%e.length])}const[te,$]=h("RovingFocusGroup");var j=B({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:o,emit:n}){const t=e,m=n,{loop:I,orientation:g,dir:T}=U(t),F=O(T),d=x(t,"currentTabStopId",m,{defaultValue:t.defaultCurrentTabStopId,passive:t.currentTabStopId===void 0}),i=v(!1),l=v(!1),f=v(0),{getItems:b,CollectionSlot:A}=P({isProvider:!0});function E(r){const s=!l.value;if(r.currentTarget&&r.target===r.currentTarget&&s&&!i.value){const u=new CustomEvent(M,V);if(r.currentTarget.dispatchEvent(u),m("entryFocus",u),!u.defaultPrevented){const p=b().map(a=>a.ref).filter(a=>a.dataset.disabled!==""),_=p.find(a=>a.getAttribute("data-active")===""),y=p.find(a=>a.id===d.value),R=[_,y,...p].filter(Boolean);Y(R,t.preventScrollOnEntryFocus)}}l.value=!1}function C(){setTimeout(()=>{l.value=!1},1)}return o({getItems:b}),$({loop:I,dir:F,orientation:g,currentTabStopId:d,onItemFocus:r=>{d.value=r},onItemShiftTab:()=>{i.value=!0},onFocusableItemAdd:()=>{f.value++},onFocusableItemRemove:()=>{f.value--}}),(r,s)=>(G(),D(c(A),null,{default:S(()=>[N(c(q),{tabindex:i.value||f.value===0?-1:0,"data-orientation":c(g),as:r.as,"as-child":r.asChild,dir:c(F),style:{outline:"none"},onMousedown:s[0]||(s[0]=u=>l.value=!0),onMouseup:C,onFocus:E,onBlur:s[1]||(s[1]=u=>i.value=!1)},{default:S(()=>[L(r.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),oe=j;export{oe as R,Y as f,Z as g,te as i,ee as w};
