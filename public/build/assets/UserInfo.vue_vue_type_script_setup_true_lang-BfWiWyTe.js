import{P as w,c as q}from"./index-BZs4ypES.js";import{c as R}from"./useForwardPropsEmits-CwhGNt__.js";import{u as A}from"./useForwardExpose-Czjpx7C4.js";import{d as c,r as _,c as i,o as n,a as d,b as p,u as l,w as B,L as m,f as k,j as x,p as F,t as M,l as P,V as z,ad as N,F as U,m as S,e as C,G as j,E as L,g as O,z as T,A as h}from"./app-GeWjX9nR.js";import{i as E}from"./index-H4X_E94e.js";const[b,V]=R("AvatarRoot");var D=c({__name:"AvatarRoot",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){return A(),V({imageLoadingStatus:_("idle")}),(e,o)=>(n(),i(l(w),{"as-child":e.asChild,as:e.as},{default:d(()=>[p(e.$slots,"default")]),_:3},8,["as-child","as"]))}}),G=D,W=c({__name:"AvatarFallback",props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){const e=t,o=b();A();const s=_(e.delayMs===void 0);return B(a=>{if(e.delayMs&&E){const u=window.setTimeout(()=>{s.value=!0},e.delayMs);a(()=>{window.clearTimeout(u)})}}),(a,u)=>s.value&&l(o).imageLoadingStatus.value!=="loaded"?(n(),i(l(w),{key:0,"as-child":a.asChild,as:a.as},{default:d(()=>[p(a.$slots,"default")]),_:3},8,["as-child","as"])):m("v-if",!0)}}),H=W;function $(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function J(t,{referrerPolicy:e,crossOrigin:o}={}){const s=_(!1),a=_(null),u=k(()=>s.value?(!a.value&&E&&(a.value=new window.Image),a.value):null),v=_($(u.value,t.value)),g=f=>()=>{s.value&&(v.value=f)};return x(()=>{s.value=!0,B(f=>{const r=u.value;if(!r)return;v.value=$(r,t.value);const y=g("loaded"),I=g("error");r.addEventListener("load",y),r.addEventListener("error",I),e?.value&&(r.referrerPolicy=e.value),typeof o?.value=="string"&&(r.crossOrigin=o.value),f(()=>{r.removeEventListener("load",y),r.removeEventListener("error",I)})})}),F(()=>{s.value=!1}),v}var K=c({__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"img"}},emits:["loadingStatusChange"],setup(t,{emit:e}){const o=t,s=e,{src:a,referrerPolicy:u,crossOrigin:v}=M(o);A();const g=b(),f=J(a,{referrerPolicy:u,crossOrigin:v});return P(f,r=>{s("loadingStatusChange",r),r!=="idle"&&(g.imageLoadingStatus.value=r)},{immediate:!0}),(r,y)=>z((n(),i(l(w),{role:"img","as-child":r.asChild,as:r.as,src:l(a),"referrer-policy":l(u)},{default:d(()=>[p(r.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[N,l(f)==="loaded"]])}}),Q=K;const X=c({__name:"Avatar",props:{class:{}},setup(t){const e=t;return(o,s)=>(n(),i(l(G),{"data-slot":"avatar",class:U(l(q)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e.class))},{default:d(()=>[p(o.$slots,"default")]),_:3},8,["class"]))}}),Y=c({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{},class:{}},setup(t){const e=t,o=k(()=>{const{class:s,...a}=e;return a});return(s,a)=>(n(),i(l(H),S({"data-slot":"avatar-fallback"},o.value,{class:l(q)("bg-muted flex size-full items-center justify-center rounded-full",e.class)}),{default:d(()=>[p(s.$slots,"default")]),_:3},16,["class"]))}}),Z=c({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(t){const e=t;return(o,s)=>(n(),i(l(Q),S({"data-slot":"avatar-image"},e,{class:"aspect-square size-full"}),{default:d(()=>[p(o.$slots,"default")]),_:3},16))}});function ee(t){if(!t)return"";const e=t.trim().split(" ");return e.length===0?"":e.length===1?e[0].charAt(0).toUpperCase():`${e[0].charAt(0)}${e[e.length-1].charAt(0)}`.toUpperCase()}function ae(){return{getInitials:ee}}const te={class:"truncate font-medium"},se={key:0,class:"truncate text-xs text-muted-foreground"},re={key:1,class:"truncate text-xs text-muted-foreground"},de=c({__name:"UserInfo",props:{user:{},showEmail:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!0}},setup(t){const e=t,{getInitials:o}=ae(),s=k(()=>e.user.avatar&&e.user.avatar!=="");return(a,u)=>(n(),C(j,null,[a.showIcon?(n(),i(l(X),{key:0,class:"h-8 w-8 overflow-hidden rounded-lg"},{default:d(()=>[s.value?(n(),i(l(Z),{key:0,src:a.user.avatar,alt:a.user.name},null,8,["src","alt"])):m("",!0),O(l(Y),{class:"rounded-lg text-black dark:text-white"},{default:d(()=>[T(h(l(o)(a.user.name)),1)]),_:1})]),_:1})):m("",!0),L("div",S({class:"grid flex-1 text-left text-sm leading-tight"},a.$attrs),[L("span",te,h(a.user.name),1),a.showEmail?(n(),C("span",se,h(a.user.email),1)):m("",!0),a.user.role?(n(),C("span",re,"("+h(a.user.role)+")",1)):m("",!0)],16)],64))}});export{de as _};
