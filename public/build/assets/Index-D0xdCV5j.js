import{d as g,r as x,e as o,o as a,g as n,E as e,u as l,N as v,c as f,L as p,G as u,I as h,A as r,z as m,a as _,K as b}from"./app-BLrU0oeZ.js";import{_ as k}from"./index-N1-JztXm.js";import{m as w}from"./useSlug-tpINBdFG.js";import{_ as C}from"./UserInfo.vue_vue_type_script_setup_true_lang-BQl9F7L7.js";import{_ as c}from"./TextLink.vue_vue_type_script_setup_true_lang-q34rlnBw.js";import{_ as A}from"./InlineHeader.vue_vue_type_script_setup_true_lang-DcWcj84i.js";import{_ as $}from"./Paginator.vue_vue_type_script_setup_true_lang-BNV3xuqJ.js";import"./useForwardPropsEmits-DMzaJHsr.js";import"./useForwardExpose-BYFvSCAe.js";import"./index-CTBYmGwP.js";import"./Heading.vue_vue_type_script_setup_true_lang-OlAXPcJL.js";import"./createLucideIcon-Z75VbzRp.js";import"./chevron-right-C24Nrbuj.js";const B={class:"p-6"},N={class:"bg-background rounded-md shadow-sm overflow-hidden"},P={class:"min-w-full divide-y"},S={class:"bg-primary-foreground"},D={class:"px-4 py-3 text-left text-sm font-medium"},V={class:"bg-accent divide-y"},j={class:"px-4 py-3 text-sm"},z={class:"text-xs text-muted-foreground mt-1"},E={class:"px-4 py-3 text-sm capitalize"},I={class:"px-4 py-3 text-sm"},F={class:"px-4 py-3 text-sm"},L={class:"px-4 py-3 text-sm text-right space-x-4"},T={key:0},U={key:1},G={breadcrumbs:[{title:"Posts",href:"/posts"}]},at=g({...G,__name:"Index",props:{posts:{},canChangeStatus:{type:Boolean}},setup(K){const d=x(null);function y(s){confirm("Do you really want to delete this post? It will be permanently deleted. You will be not able to restore it.")&&(d.value=s,b.delete(route("posts.destroy",s),{preserveState:!0,onFinish:()=>{d.value=null}}))}return(s,i)=>(a(),o(u,null,[n(l(v),{title:"Posts"}),e("div",B,[n(A,{title:"Posts",link:{href:s.route("posts.create"),text:"Create Post"}},null,8,["link"]),e("div",N,[e("table",P,[e("thead",S,[e("tr",null,[(a(),o(u,null,h(["Title","Status","Author","Published","Actions"],t=>e("th",D,r(t),1)),64))])]),e("tbody",V,[(a(!0),o(u,null,h(s.posts.data,t=>(a(),o("tr",{key:t.id},[e("td",j,[m(r(t.title)+" ",1),e("p",z,"Url: "+r(l(w)(t.slug)),1),t.status==="pending"&&s.canChangeStatus?(a(),o(u,{key:0},[n(c,{method:"post",href:s.route("posts.change_status",t.id),data:{status:"approve"}},{default:_(()=>i[0]||(i[0]=[m("Approve",-1)])),_:2,__:[0]},1032,["href"]),n(c,{method:"post",href:s.route("posts.change_status",t.id),data:{status:"reject"},class:"mx-2 hover:text-destructive"},{default:_(()=>i[1]||(i[1]=[m("Reject",-1)])),_:2,__:[1]},1032,["href"])],64)):p("",!0)]),e("td",E,r(t.status==="rejected"?"Admin ":"")+r(t.status)+r(t.status==="pending"?" (Waiting for Admin Approval)":""),1),e("td",I,[n(C,{user:t.author,"show-icon":!1,"show-email":!0},null,8,["user"])]),e("td",F,r(t.published_at||"â€”"),1),e("td",L,[n(c,{href:s.route("posts.edit",t.id)},{default:_(()=>i[2]||(i[2]=[m("Edit",-1)])),_:2,__:[2]},1032,["href"]),t.can_delete?(a(),f(l(k),{key:0,variant:"destructive",size:"sm",onClick:R=>y(t.id),disabled:d.value===t.id},{default:_(()=>[d.value===t.id?(a(),o("span",T,"Deleting...")):(a(),o("span",U,"Delete"))]),_:2},1032,["onClick","disabled"])):p("",!0)])]))),128))])])]),s.posts.links?(a(),f(l($),{key:0,class:"mt-4","pagiantion-data":s.posts,"base-route-name":"posts.index"},null,8,["pagiantion-data"])):p("",!0)])],64))}});export{at as default};
