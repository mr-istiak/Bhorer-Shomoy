import{M as k,r as E,e as r,o as l,E as t,A as v,G as f,I as b,n as M,V as S,W as B,K as L}from"./app-GeWjX9nR.js";const A={class:"p-6"},D={class:"text-xl font-bold mb-4"},X={class:"relative border inline-block",ref:"container"},Y=["src"],R={class:"mt-4 space-x-2"},V={class:"mt-4"},F={__name:"EpaperAnnotator",props:{page:Object},setup(i){const w=i,a=k([]),c=E("headline");let d,u,p=!1;const x=n=>{const e=n.target.getBoundingClientRect();d=n.clientX-e.left,u=n.clientY-e.top,p=!0;const s=g=>{if(!p)return;const m=g.clientX-e.left,h=g.clientY-e.top;a[0]={x:Math.min(d,m),y:Math.min(u,h),w:Math.abs(m-d),h:Math.abs(h-u)}},o=g=>{window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",o),p=!1};window.addEventListener("mousemove",s),window.addEventListener("mouseup",o)},y=n=>({left:n.x+"px",top:n.y+"px",width:n.w+"px",height:n.h+"px"}),_=()=>{if(a.length===0)return alert("Select a region first.");L.post(route("epaper.articles.store"),{page_id:w.page.id,type:c.value,coords:a[0]}).then(()=>{a.length=0})};return(n,e)=>(l(),r("div",A,[t("h1",D,"Annotate Page "+v(i.page.page_number),1),t("div",X,[t("img",{src:`/storage/${i.page.image_path}`,ref:"img",class:"block",onMousedown:x},null,40,Y),(l(!0),r(f,null,b(a,(s,o)=>(l(),r("div",{key:o,style:M(y(s)),class:"absolute border-2 border-red-500 pointer-events-none"},null,4))),128))],512),t("div",R,[S(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),class:"border p-2"},e[1]||(e[1]=[t("option",{value:"headline"},"Headline",-1),t("option",{value:"full"},"Full Article",-1)]),512),[[B,c.value]]),t("button",{onClick:_,class:"bg-green-600 text-white px-4 py-2 rounded"},"Save Region")]),t("div",V,[e[2]||(e[2]=t("h2",{class:"font-bold"},"Saved Regions",-1)),t("ul",null,[(l(!0),r(f,null,b(i.page.articles,(s,o)=>(l(),r("li",{key:o},v(s.type)+" - ID: "+v(s.id),1))),128))])])]))}};export{F as default};
